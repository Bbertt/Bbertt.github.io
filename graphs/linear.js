var elt = document.getElementById('calculator-lin');
var calculator_lin = Desmos.GraphingCalculator(elt, {expressionsCollapsed: true, keypad: false, fontSize: desmosfontSize, restrictedFunctions:true, expressions: true, showGrid: false, invertedColors: darkMode, showXAxis:false, showYAxis:false});
var graphStatelinear = {
    "version": 10,
    "randomSeed": "0fb4ac7738f4925697d98d4abef50a6f",
    "graph": {
        "viewport": {
            "xmin": -1.0219691627527314,
            "ymin": -2.0451731320877498,
            "xmax": 6.694006267765716,
            "ymax": 6.868543810844802
        },
        "showGrid": false,
        "xAxisLabel": "X",
        "yAxisLabel": "Y"
    },
    "expressions": {
        "list": [
            {
                "type": "expression",
                "id": "82",
                "color": "#2d70b3",
                "latex": "t=-8.644",
                "slider": {
                    "hardMin": true,
                    "animationPeriod": 80000,
                    "loopMode": "LOOP_FORWARD",
                    "isPlaying": true,
                    "min": "-9"
                }
            },
            {
                "type": "text",
                "id": "76",
                "text": "Your Data : generated by a linear model + a noise with mean 0.",
                "secret": "true"
            },
            {
                "id": "28",
                "secret": "true",
                "type": "table",
                "columns": [
                    {
                        "values": [
                            "0.5",
                            "1",
                            "1.2",
                            "2",
                            "2.3",
                            "2.8",
                            "3.1",
                            "3.5",
                            "1",
                            "2",
                            "1.1",
                            "1.2",
                            "1.7",
                            "1.5",
                            "1.1",
                            "1.2",
                            "1.9",
                            "2.1",
                            "2",
                            "0.4",
                            "0.6",
                            "0.8",
                            "0.9",
                            "0.3",
                            "0.1",
                            "0.6",
                            "0.9",
                            "0.82",
                            "0.9",
                            "3.2",
                            "3",
                            "2.8"
                        ],
                        "hidden": true,
                        "id": "26",
                        "color": "#2d70b3",
                        "latex": "x_{1}"
                    },
                    {
                        "values": [
                            "1.75",
                            "1.4",
                            "1.7",
                            "1.8",
                            "2.45",
                            "2.6",
                            "2.05",
                            "2.45",
                            "0.9",
                            "2.6",
                            "2.15",
                            "1",
                            "2.15",
                            "1.45",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            ""
                        ],
                        "id": "27",
                        "color": "#388c46",
                        "latex": "f\\left(x_{1}\\right)\\left\\{-8<t<-7\\right\\}",
                        "pointSize": "6",
                        "pointOpacity": "1"
                    },
                    {
                        "values": [
                            "0.1",
                            "0",
                            "0.1",
                            "0",
                            "-0.1",
                            "-0.1",
                            "-0.5",
                            "0.5",
                            "0.2",
                            "0.2",
                            "-0.2",
                            "-0.2",
                            "0.01",
                            "-0.01",
                            "-0.01",
                            "0.01",
                            "0.2",
                            "-0.2",
                            "-0.33",
                            "0.33",
                            "0.06",
                            "-0.06",
                            "0.4",
                            "-0.4",
                            "-0.2",
                            "0.2",
                            "0.5",
                            "-0.5",
                            "+0.2",
                            "-0.2",
                            "+0.45",
                            "-0.45"
                        ],
                        "hidden": true,
                        "id": "50",
                        "color": "#c74440",
                        "latex": "u"
                    },
                    {
                        "values": [
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            ""
                        ],
                        "id": "71",
                        "color": "#2d70b3",
                        "latex": "\\left(f\\left(x_{1}\\right)+u\\right)\\left\\{t\\ge-4\\right\\}",
                        "pointSize": "6"
                    },
                    {
                        "values": [
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            ""
                        ],
                        "id": "81",
                        "color": "#388c46",
                        "pointStyle": "OPEN",
                        "latex": "\\left\\{-7<t<-6.5:\\frac{f\\left(x_{1}\\right)\\left(-6.5-t\\right)}{0.5}+\\frac{\\left(f\\left(x_{1}\\right)+u\\right)\\left(t+7\\right)}{0.5}\\right\\}",
                        "pointSize": "6"
                    },
                    {
                        "values": [
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            ""
                        ],
                        "id": "92",
                        "color": "#388c46",
                        "pointStyle": "OPEN",
                        "latex": "\\left\\{-6.5<t<-4:\\left(f\\left(x_{1}\\right)+u\\right)\\right\\}",
                        "pointSize": "6"
                    }
                ]
            },
            {
                "id": "100",
                "secret": "true",
                "type": "table",
                "columns": [
                    {
                        "values": [
                            "0.5",
                            "1",
                            "1.2",
                            "2",
                            "2.3",
                            "2.8",
                            "3.1",
                            "3.5",
                            "1",
                            "2",
                            "1.1",
                            "1.2",
                            "1.7",
                            "1.5",
                            "1.1",
                            "1.2",
                            "1.9",
                            "2.1",
                            "2",
                            "0.4",
                            "0.6",
                            "0.8",
                            "0.9",
                            "0.3",
                            "0.1",
                            "0.6",
                            "0.9",
                            "0.82",
                            "0.9",
                            "3.2",
                            "3",
                            "2.8"
                        ],
                        "hidden": true,
                        "id": "98",
                        "color": "#388c46",
                        "latex": "x_{2}"
                    },
                    {
                        "values": [
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            "",
                            ""
                        ],
                        "id": "99",
                        "color": "#fa7e19",
                        "latex": "\\left\\{2<t<5:a_{h}\\ x_{1}+b_{h}\\right\\}",
                        "pointSize": "6"
                    }
                ]
            },
            {
                "type": "text",
                "secret": "true",
                "id": "78",
                "text": "The unknown parameters of the generative model"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "53",
                "color": "#6042a6",
                "latex": "a=0.4"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "69",
                "color": "#000000",
                "latex": "b=1.1"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "30",
                "color": "#000000",
                "latex": "f\\left(x\\right)=a\\cdot x\\ +b\\ ",
                "hidden": true,
                "lineStyle": "DASHED",
                "lineOpacity": "0.7"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "91",
                "color": "#388c46",
                "latex": "\\left(3,0.75\\left\\{-8<t<-7\\right\\}\\right)",
                "showLabel": true,
                "label": "${a} X + ${b}",
                "dragMode": "NONE",
                "labelSize": "1.2",
                "pointSize": "6"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "93",
                "color": "#388c46",
                "latex": "\\left(3,0.75\\left\\{-7<t<-4\\right\\}\\right)",
                "showLabel": true,
                "label": "${a} X + ${b} + error",
                "pointStyle": "OPEN",
                "dragMode": "NONE",
                "labelSize": "1.2",
                "labelOrientation": "right",
                "pointSize": "6"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "107",
                "color": "#388c46",
                "latex": "\\left(3,1\\left\\{-5<t<-4\\right\\}\\right)",
                "showLabel": true,
                "label": "Data generated",
                "hidden": true,
                "labelSize": "1.5",
                "labelOrientation": "above"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "94",
                "color": "#2d70b3",
                "latex": "\\left(3,0.75\\left\\{-4<t<-2\\right\\}\\right)",
                "showLabel": true,
                "label": "observed data",
                "labelSize": "1.2",
                "labelOrientation": "right",
                "pointSize": "6"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "96",
                "color": "#fa7e19",
                "latex": "\\left(2.5,0.75\\left\\{2<t<5\\right\\}\\right)",
                "showLabel": true,
                "label": "`\\ \\ \\hat{y}=`${a_h} X + ${b_h}",
                "dragMode": "NONE",
                "labelSize": "1.2",
                "pointSize": "6"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "95",
                "color": "#000000",
                "latex": "\\left(3,0.75\\left\\{5<t\\right\\}\\right)",
                "showLabel": true,
                "label": "The dotted line is an approximation ",
                "hidden": true
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "105",
                "color": "#000000",
                "latex": "\\left(3,0.5\\left\\{5<t\\right\\}\\right)",
                "showLabel": true,
                "label": "of the true model: the estimated",
                "hidden": true
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "106",
                "color": "#000000",
                "latex": "\\left(3,0.25\\left\\{5<t\\right\\}\\right)",
                "showLabel": true,
                "label": " model is different from the true model",
                "hidden": true
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "90",
                "color": "#fa7e19",
                "latex": "\\left\\{t>0:f_{h}\\left(x\\right)\\right\\}",
                "lineStyle": "DASHED",
                "lineWidth": "3"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "110",
                "color": "#fa7e19",
                "latex": "g\\left(x\\right)=\\left(a+0.1\\right)\\frac{t}{-2}x\\ +\\left(a-0.5\\right)\\cdot\\left(1-\\frac{t}{-2}\\right)x+\\left(\\left(b-0.5\\right)\\cdot\\frac{t}{-2}+\\left(b+0.5\\right)\\cdot\\left(1-\\frac{t}{-2}\\right)\\right)",
                "hidden": true,
                "lineStyle": "DASHED"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "113",
                "color": "#fa7e19",
                "latex": "h\\left(x\\right)=\\frac{t}{-2}g\\left(x\\right)+\\left(1-\\frac{t}{-2}\\right)f_{h}\\left(x\\right)",
                "hidden": true,
                "lineStyle": "DASHED"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "114",
                "color": "#fa7e19",
                "latex": "h_{0}\\left(x\\right)=h\\left(x\\right)\\left\\{-2<t\\le0\\right\\}",
                "lineStyle": "DASHED",
                "lineWidth": "2.5"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "111",
                "color": "#fa7e19",
                "latex": "\\operatorname{polygon}\\left(\\left(x_{1}\\left\\{-2<t\\le0\\right\\},h\\left(x_{1}\\right)\\right),\\left(x_{1}\\left\\{-2<t\\le0\\right\\},\\ f\\left(x_{1}\\right)+u\\right)\\right)",
                "lineWidth": "1.5"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "116",
                "color": "#fa7e19",
                "latex": "\\operatorname{polygon}\\left(\\left(x_{1}\\left\\{0<t\\le1\\right\\},f_{h}\\left(x_{1}\\right)\\right),\\left(x_{1}\\left\\{0<t\\le1\\right\\},\\ f\\left(x_{1}\\right)+u\\right)\\right)",
                "lineWidth": "1.5"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "84",
                "color": "#000000",
                "latex": "\\left\\{t\\le-5:f\\left(x\\right),\\ t>5:f\\left(x\\right)\\right\\}",
                "lineOpacity": "0.5",
                "lineWidth": "3"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "85",
                "color": "#000000",
                "latex": "\\left(3,1\\left\\{t\\le-5\\right\\}\\right)",
                "showLabel": true,
                "label": "Unknown true model",
                "hidden": true,
                "labelSize": "1.5",
                "labelOrientation": "above",
                "pointOpacity": "1"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "103",
                "color": "#2d70b3",
                "latex": "\\left(3,1\\left\\{-4<t<-3\\right\\}\\right)",
                "showLabel": true,
                "label": "Real world",
                "hidden": true,
                "labelSize": "1.5",
                "labelOrientation": "above"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "104",
                "color": "#000000",
                "latex": "\\left(3,1\\left\\{-3<t<-2\\right\\}\\right)",
                "showLabel": true,
                "label": "Goal: find the line that generated the data",
                "hidden": true,
                "labelSize": "1.2",
                "labelOrientation": "above"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "86",
                "color": "#fa7e19",
                "latex": "\\left(3,1.2\\left\\{0<t<2\\right\\}\\right)",
                "showLabel": true,
                "label": "Model estimated by OLS",
                "hidden": true,
                "labelSize": "1.5",
                "labelOrientation": "above"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "102",
                "color": "#fa7e19",
                "latex": "\\left(3,1\\left\\{2\\le t<5\\right\\}\\right)",
                "showLabel": true,
                "label": "Predicted Y",
                "hidden": true,
                "labelSize": "1.5",
                "labelOrientation": "above"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "87",
                "color": "#6042a6",
                "latex": "\\left\\{t\\le0:A,B\\ \\right\\}",
                "hidden": true
            },
            {
                "type": "text",
                "secret": "true",
                "id": "80",
                "text": "OLS estimation of the parameters"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "45",
                "color": "#c74440",
                "latex": "b_{h}=\\operatorname{round}\\left(\\operatorname{mean}\\left(f\\left(x_{1}\\right)+u\\right)\\ -\\ a_{h}\\cdot\\operatorname{mean}\\left(x_{1}\\right),3\\right)"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "48",
                "color": "#6042a6",
                "latex": "a_{h}=\\operatorname{round}\\left(\\frac{\\operatorname{total}\\left(\\left(\\left(x_{1}-\\operatorname{mean}\\left(x_{1}\\right)\\right)\\cdot\\left(f\\left(x_{1}\\right)+u-\\operatorname{mean}\\left(f\\left(x_{1}\\right)+u\\right)\\right)\\right)\\right)}{\\operatorname{total}\\left(\\left(x_{1}-\\operatorname{mean}\\left(x_{1}\\right)\\right)^{2}\\right)},3\\right)",
                "labelSize": "1"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "66",
                "color": "#c74440",
                "latex": "f_{h}\\left(x\\right)\\ =\\ a_{h}\\cdot x\\ +\\ b_{h}",
                "hidden": true,
                "lineOpacity": "1",
                "lineWidth": "3"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "117",
                "color": "#000000",
                "latex": "a_{t}=\\left\\{t<0:\\operatorname{round}\\left(\\frac{h\\left(2\\right)-h\\left(1\\right)}{2-1},2\\right),a_{h}\\right\\}"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "118",
                "color": "#c74440",
                "latex": "b_{t}\\ =\\ \\left\\{t<0:\\operatorname{round}\\left(h\\left(0\\right),2\\right),\\ b_{h}\\right\\}"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "65",
                "color": "#000000",
                "latex": "\\left(3,1\\left\\{-2<t<2\\right\\}\\right)",
                "showLabel": true,
                "label": "`\\hat{a}=${a_{t}}`, `\\hat{b}=${b_{t}}`",
                "hidden": true,
                "labelOrientation": "right"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "64",
                "color": "#000000",
                "latex": "\\left(0.5,5\\left\\{-2<t<2\\right\\}\\right)",
                "showLabel": true,
                "label": "Sum of squared residuals:",
                "hidden": true,
                "labelOrientation": "right"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "120",
                "color": "#000000",
                "latex": "\\left(0.5,4\\left\\{-2<t<2\\right\\}\\right)",
                "showLabel": true,
                "label": "`\\sum_{k=1}^{32} \\left(y_k - (\\hat{a}x_k + \\hat{b})\\right)^2 = ${s}` ",
                "hidden": true,
                "labelOrientation": "right"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "61",
                "color": "#2d70b3",
                "latex": "s\\ =\\ \\operatorname{round}\\left(\\operatorname{total}\\left(\\left(\\left(f\\left(x_{1}\\right)+u\\right)-a_{t}\\cdot x_{1}-b_{t}\\right)^{2}\\right),2\\right)"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "59",
                "color": "#000000"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "57",
                "color": "#388c46"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "55",
                "color": "#c74440"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "54",
                "color": "#000000"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "37",
                "color": "#2d70b3",
                "labelSize": "1"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "38",
                "color": "#388c46"
            },
            {
                "type": "expression",
                "secret": "true",
                "id": "39",
                "color": "#6042a6"
            }
        ]
    }
};

elt.style.width = '100%';
elt.style.height = '400px';
calculator_lin.resize();

calculator_lin.setMathBounds({
left: -1,
right: 6.5,
bottom: -2,
top: 6.2});

calculator_lin.setState(graphStatelinear);
calculator_lin.setDefaultState(graphStatelinear);
